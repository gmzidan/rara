<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jadl Harian</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f7f6f3;
      margin: 0;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #4f3f39;
    }
    .datetime-display {
      text-align: center;
      font-size: 1.2rem;
      color: #4f3f39;
      margin: 1rem 0;
    }
    .task {
      display: flex;
      align-items: center;
      background: #fff;
      margin: 0.5rem 0;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    input[type="checkbox"] {
      margin-right: 1rem;
      transform: scale(1.2);
    }
    .checked {
      text-decoration: line-through;
      color: #999;
    }
    .footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #aaa;
    }
    .fallback-message {
      text-align: center;
      color: #4f3f39;
    }
  </style>
</head>
<body>
  <h1>Rara's Daily Routine</h1>
  <div class="datetime-display" id="current-datetime">Memuat waktu...</div>
  <div id="task-list">
    <p class="fallback-message">Memuat daftar tugas... Buka di Safari untuk pengalaman interaktif.</p>
  </div>
  <div class="footer">Checklist akan di-reset setiap hari. Untuk pengalaman terbaik, buka di Safari.</div>

  <script>
    const dailyTasks = {
      'Sunday': [
        "ðŸƒâ€â™€ï¸ Lari",
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Monday': [
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Tuesday': [
        "ðŸ§¹ Piket Rumah",
        "ðŸƒâ€â™€ï¸ Lari",
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Wednesday': [
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "Les Bahasa Inggris",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Thursday': [
        "ðŸ§¹ Piket Rumah",
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Friday': [
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "Les Bahasa Inggris",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ],
      'Saturday': [
        "ðŸ§¹ Piket Rumah",
        "ðŸŒž Skincare Pagi",
        "ðŸ“š Belajar SKD",
        "ðŸŽ¯ Kegiatan A",
        "ðŸ’¬ Curhat ke Zidan",
        "ðŸŒ™ Skincare Malam"
      ]
    };

    // Cek apakah JavaScript berfungsi
    document.addEventListener('DOMContentLoaded', () => {
      const taskList = document.getElementById('task-list');
      if (!window.localStorage) {
        taskList.innerHTML = '<p class="fallback-message">Fitur interaktif tidak tersedia di Quick Look. Buka di Safari untuk pengalaman penuh.</p>';
        return;
      }

      const today = new Date();
      const dayName = today.toLocaleString('en-US', { weekday: 'long' });
      const dateKey = today.toDateString();
      const tasks = dailyTasks[dayName];

      // Display current date, day, and time
      function displayDateTime() {
        const now = new Date();
        const dayName = now.toLocaleString('id-ID', { weekday: 'long' });
        const dateString = now.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'long',
          year: 'numeric'
        });
        const timeString = now.toLocaleTimeString('id-ID', { hour12: false });
        document.getElementById('current-datetime').textContent = `${dayName}, ${dateString} - ${timeString}`;
      }
      displayDateTime();
      setInterval(displayDateTime, 1000);

      // Task list handling
      const savedData = JSON.parse(localStorage.getItem('dailyTasks')) || {};

      if (savedData.date !== dateKey) {
        savedData.date = dateKey;
        savedData.status = {};
        tasks.forEach(task => savedData.status[task] = false);
        localStorage.setItem('dailyTasks', JSON.stringify(savedData));
      }

      taskList.innerHTML = ''; // Bersihkan fallback message
      tasks.forEach(task => {
        const div = document.createElement('div');
        div.className = 'task';
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = savedData.status[task] || false;
        const label = document.createElement('label');
        label.textContent = task;
        if (checkbox.checked) label.classList.add('checked');

        checkbox.addEventListener('change', () => {
          savedData.status[task] = checkbox.checked;
          localStorage.setItem('dailyTasks', JSON.stringify(savedData));
          label.classList.toggle('checked', checkbox.checked);
        });

        div.appendChild(checkbox);
        div.appendChild(label);
        taskList.appendChild(div);
      });
    });
  </script>
</body>
</html>
